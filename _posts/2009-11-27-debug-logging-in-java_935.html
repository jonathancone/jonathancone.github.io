---
layout: post
title: Debug logging in Java
date: '2009-11-27T15:10:00.002-06:00'
author: Jonathan Cone
tags:
- Java
- Logging
modified_time: '2010-09-15T19:33:01.388-05:00'
blogger_id: tag:blogger.com,1999:blog-850212609563989685.post-7704880851829909597
blogger_orig_url: http://www.machineversus.me/2009/11/debug-logging-in-java_935.html
---

Some people really dislike debug log messages in production code.  Though they can be extremely useful, I think a lot of developers are turned off to the fact that when logging is done poorly, it really makes the code look like a mess.  For example, we've all seen code like this:<br /><br /><code><br /><pre>   public class PressureValveController {<br />   ...<br />      public void closeValve() {<br />      ...<br />         LOG.debug("my out temp" + temperature + " press: " + <br />            pressure + " and flowRate " + flowRate);<br />      }<br />   }<br /></pre></code><br /><br />The above is nothing more than 'stream of consciousness' logging.  Its funny how after about 20 years of schooling, trained software engineers still refuse to write complete sentences.  The developer basically just dumped the stack to debug a specific problem they were having.  This is one of a combination of factors that make code painful to read when logging is involved:<br /><ul><li>poor/no grammar</li><li>multiple log statements per method</li><li>excessive string concatenation</li></ul><br />I think there are a couple of things you can do to make this more useful.  First of all, leverage the features of the language to make it more readable.  I like to create a helper method for logging in Java:<br /><br /><code><br /><pre>   ...<br />   private void debug(String message, Object... args) {<br />      if(LOG.isDebugEnabled()) {<br />         LOG.debug(String.format(message, args));<br />      }<br />   }<br /></pre></code><br /><br />The next thing to do is to follow certain guidelines with respect to uniformity and sentence structure.  For example:<br /><br /><code><br /><pre>   public class PressureValveController {<br />      ...<br />      public void closeValve() {<br />      ...<br />         debug("Closing valve with output temperature: %d, pressure: %f PSI, and a flow of %f CFM.", temperature, pressure, flowRate);<br />      }<br />   }<br /></pre></code><br /><br /><br />I don't know about you, but I think this ends up being a lot more useful in terms of code clarity and actual output.  Its interesting that we wouldn't tolerate a user interface with messy output, why do we tolerate this in a log file?